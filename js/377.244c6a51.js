"use strict";(self["webpackChunkoh"]=self["webpackChunkoh"]||[]).push([[377],{3377:function(t,s,i){i.r(s),i.d(s,{default:function(){return G}});var e=i(6768),a=i(4232);const c={class:"product-info mt-5"},o={class:"container"},r={"aria-label":"breadcrumb"},d={class:"breadcrumb"},l={class:"breadcrumb-item"},n={class:"breadcrumb-item"},u={key:0,class:"breadcrumb-item active","aria-current":"page"},p={key:1,class:"breadcrumb-item active","aria-current":"page"},k={class:"row"},h={class:"col-md-6"},v={class:"img-wrap"},g=["src"],m={class:"col-md-6"},L={class:"information"},b={class:"category"},_={class:"title-wrap"},f={class:"title"},E={class:"content"},C={class:"d-flex align-items-center justify-content-between mt-3"},P={key:0,class:"h5"},w={key:1,class:"origin-price"},y={key:2,class:"price"},A={class:"add-content"},V=["disabled"],S={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},U={class:"col-md-12"},F={class:"content"},N=["innerHTML"],$={class:"col-md-12"},B={class:"related-product"},I={class:"card"},X=["onClick"],D={class:"card-title"},R={class:"card-img-top rounded border-0"},H=["src"],O={class:"card-body"},T={class:"price"},W=["onClick"],Q=["onClick"];function x(t,s,i,x,j,q){const M=(0,e.g2)("router-link"),K=(0,e.g2)("font-awesome-icon"),z=(0,e.g2)("swiper-slide"),G=(0,e.g2)("swiper");return(0,e.uX)(),(0,e.CE)("div",c,[(0,e.Lk)("div",o,[(0,e.Lk)("div",r,[(0,e.Lk)("ol",d,[(0,e.Lk)("li",l,[(0,e.bF)(M,{to:"/"},{default:(0,e.k6)((()=>s[2]||(s[2]=[(0,e.eW)("Home")]))),_:1})]),(0,e.Lk)("li",n,[(0,e.bF)(M,{to:"/items"},{default:(0,e.k6)((()=>s[3]||(s[3]=[(0,e.eW)("Collections")]))),_:1})]),j.product?((0,e.uX)(),(0,e.CE)("li",u,(0,a.v_)(j.product.title),1)):((0,e.uX)(),(0,e.CE)("li",p," Loading... "))])]),(0,e.Lk)("div",k,[(0,e.Lk)("div",h,[(0,e.Lk)("div",v,[(0,e.Lk)("img",{src:j.product.imageUrl,alt:"",class:"img-fluid rounded border-0 mb-3"},null,8,g)])]),(0,e.Lk)("div",m,[(0,e.Lk)("div",L,[(0,e.Lk)("div",b,(0,a.v_)(j.product.category),1),(0,e.Lk)("div",_,[(0,e.Lk)("div",f,(0,a.v_)(j.product.title),1),(0,e.Lk)("div",{class:"add-to-favorite",onClick:s[0]||(s[0]=t=>q.toggleFavorite(j.product.id))},[(0,e.bF)(K,{icon:["fas","heart"],class:(0,a.C4)({like:j.favorites.includes(j.product.id)})},null,8,["class"])])]),(0,e.Lk)("div",E,[(0,e.Lk)("p",null,(0,a.v_)(j.product.content),1)]),(0,e.Lk)("div",C,[j.product.price?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",P,(0,a.v_)(j.product.origin_price)+"元",1)),j.product.price?((0,e.uX)(),(0,e.CE)("div",w,(0,a.v_)(j.product.origin_price)+"元",1)):(0,e.Q3)("",!0),j.product.price?((0,e.uX)(),(0,e.CE)("div",y,(0,a.v_)(j.product.price)+"元",1)):(0,e.Q3)("",!0)]),(0,e.Lk)("div",A,[s[7]||(s[7]=(0,e.Lk)("div",{class:"input-group"},[(0,e.Lk)("button",{class:"btn btn-outline-secondary",type:"button"},"-"),(0,e.Lk)("input",{type:"text",class:"form-control",value:"1"}),(0,e.Lk)("button",{class:"btn btn-outline-secondary",type:"button"},"+")],-1)),(0,e.Lk)("button",{type:"button",class:"add-to-cart",onClick:s[1]||(s[1]=t=>q.addCart(j.product.id)),disabled:this.status.loadingItem===j.product.id},[s[5]||(s[5]=(0,e.Lk)("i",{class:"fas fas-spinner fa-spin"},null,-1)),this.status.loadingItem===j.product.id?((0,e.uX)(),(0,e.CE)("div",S,s[4]||(s[4]=[(0,e.Lk)("span",{class:"visually-hidden"},"Loading...",-1)]))):(0,e.Q3)("",!0),s[6]||(s[6]=(0,e.eW)(" 加到購物車 "))],8,V)])])]),(0,e.Lk)("div",U,[(0,e.Lk)("div",F,[s[8]||(s[8]=(0,e.Lk)("h2",{class:"title"},"商品介紹",-1)),(0,e.Lk)("div",{class:"description",innerHTML:j.product.description},null,8,N)])]),(0,e.Lk)("div",$,[(0,e.Lk)("div",B,[s[10]||(s[10]=(0,e.Lk)("h2",{class:"title"},"其他相關商品",-1)),(0,e.bF)(G,{class:"mySwiper",modules:t.modules,slidesPerView:"auto",breakpoints:{320:{slidesPerView:1,spaceBetween:20},540:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:2,spaceBetween:40},1124:{slidesPerView:4,spaceBetween:30}},onSwiper:t.onSwiper,onSlideChange:t.onSlideChange},{default:(0,e.k6)((()=>[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(j.products,(t=>((0,e.uX)(),(0,e.Wv)(z,{key:t.id},{default:(0,e.k6)((()=>[(0,e.Lk)("div",I,[(0,e.Lk)("a",{onClick:s=>q.getProduct(t.id)},[(0,e.Lk)("h5",D,(0,a.v_)(t.title),1),(0,e.Lk)("div",R,[(0,e.Lk)("img",{src:t.imageUrl},null,8,H)])],8,X),(0,e.Lk)("div",O,[(0,e.Lk)("div",T,"NT$"+(0,a.v_)(t.origin_price),1),(0,e.Lk)("div",{class:"add-to-cart",onClick:s=>q.addCart(t.id)},[(0,e.bF)(K,{class:"bars me-2",icon:"fas fa-bag-shopping"}),s[9]||(s[9]=(0,e.eW)("放入袋中 "))],8,W),(0,e.Lk)("div",{class:"add-to-favorite",onClick:s=>q.toggleFavorite(t)},[(0,e.bF)(K,{icon:["fas","heart"],class:(0,a.C4)({like:j.favorites.includes(t.id)})},null,8,["class"])],8,Q)])])])),_:2},1024)))),128))])),_:1},8,["modules","onSwiper","onSlideChange"])])])])])])}var j=i(8421),q=i(4976),M={components:{Swiper:j.RC,SwiperSlide:j.qr},data(){return{product:{},products:[],favorites:[],isLoading:!1,cart:{},status:{loadingItem:""}}},inject:["emitter"],methods:{getProduct(t){const s=`${{NODE_ENV:"production",BASE_URL:"/oh/"}.VUE_APP_API}api/${{NODE_ENV:"production",BASE_URL:"/oh/"}.VUE_APP_PATH}/product/${t}`;this.$http(s).then((t=>{this.product=t.data.product,this.product.description&&(this.product.description=this.formatDescription(this.product.description))}))},getProducts(){const t=`${{NODE_ENV:"production",BASE_URL:"/oh/"}.VUE_APP_API}api/${{NODE_ENV:"production",BASE_URL:"/oh/"}.VUE_APP_PATH}/products/all`;this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products)}))},formatDescription(t){return t.replace(/。/g,"。<br>").replace(/^內容物：/m,'<h2 class="subtitle">內容物</h2>').replace(/^保存期限：/m,'<h2 class="subtitle">保存期限</h2>').replace(/^保存方式：/m,'<h2 class="subtitle">保存方式</h2>').replace(/^食用方法：/m,'<h2 class="subtitle">食用方法</h2>').replace(/^營養成分：/m,'<h2 class="subtitle">營養成分</h2>')},addCart(t){const s=`${{NODE_ENV:"production",BASE_URL:"/oh/"}.VUE_APP_API}api/${{NODE_ENV:"production",BASE_URL:"/oh/"}.VUE_APP_PATH}/cart`;this.status.loadingItem=t;const i={product_id:t,qty:1};this.$http.post(s,{data:i}).then((t=>{this.status.loadingItem="",console.log(t.data),console.log("發出事件",t.data),this.emitter.emit("addCart",t.data)}))},toggleFavorite(t){this.product&&this.product.id&&(this.favorites=q.A.toggleFavorite(this.favorites,this.product.id),this.emitter.emit("push-message",{style:"success",title:this.isFavorite?"已從最愛移除！":"已加入最愛！"}))}},created(){this.favorites=q.A.loadFavorites();const t=this.$route.params.productId;this.getProduct(t),this.getProducts()}},K=i(1241);const z=(0,K.A)(M,[["render",x]]);var G=z}}]);
//# sourceMappingURL=377.244c6a51.js.map