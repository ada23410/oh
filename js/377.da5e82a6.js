"use strict";(self["webpackChunkoh"]=self["webpackChunkoh"]||[]).push([[377],{3377:function(t,s,e){e.r(s),e.d(s,{default:function(){return J}});var i=e(6768),a=e(4232);const c={class:"product-info mt-5"},o={class:"container"},r={"aria-label":"breadcrumb"},d={class:"breadcrumb"},l={class:"breadcrumb-item"},n={class:"breadcrumb-item"},u={key:0,class:"breadcrumb-item active","aria-current":"page"},p={key:1,class:"breadcrumb-item active","aria-current":"page"},h={class:"row"},k={class:"col-md-6"},v={class:"img-wrap"},g=["src"],m={class:"col-md-6"},L={class:"information"},b={class:"category"},f={class:"title-wrap"},C={class:"title"},w={class:"content"},y={class:"d-flex align-items-center justify-content-between mt-3"},_={key:0,class:"h5"},F={key:1,class:"origin-price"},P={key:2,class:"price"},S={class:"add-content"},X=["disabled"],E={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},I={class:"col-md-12"},x={class:"content"},$=["innerHTML"],V={class:"col-md-12"},W={class:"related-product"},B={class:"card"},Q=["onClick"],A={class:"card-title"},H={class:"card-img-top rounded border-0"},T=["src"],j={class:"card-body"},q={class:"price"},D=["onClick"],M=["onClick"];function U(t,s,e,U,K,N){const R=(0,i.g2)("router-link"),z=(0,i.g2)("font-awesome-icon"),G=(0,i.g2)("swiper-slide"),J=(0,i.g2)("swiper");return(0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",o,[(0,i.Lk)("div",r,[(0,i.Lk)("ol",d,[(0,i.Lk)("li",l,[(0,i.bF)(R,{to:"/"},{default:(0,i.k6)((()=>s[2]||(s[2]=[(0,i.eW)("Home")]))),_:1})]),(0,i.Lk)("li",n,[(0,i.bF)(R,{to:"/items"},{default:(0,i.k6)((()=>s[3]||(s[3]=[(0,i.eW)("Collections")]))),_:1})]),K.product?((0,i.uX)(),(0,i.CE)("li",u,(0,a.v_)(K.product.title),1)):((0,i.uX)(),(0,i.CE)("li",p," Loading... "))])]),(0,i.Lk)("div",h,[(0,i.Lk)("div",k,[(0,i.Lk)("div",v,[(0,i.Lk)("img",{src:K.product.imageUrl,alt:"",class:"img-fluid rounded border-0 mb-3"},null,8,g)])]),(0,i.Lk)("div",m,[(0,i.Lk)("div",L,[(0,i.Lk)("div",b,(0,a.v_)(K.product.category),1),(0,i.Lk)("div",f,[(0,i.Lk)("div",C,(0,a.v_)(K.product.title),1),(0,i.Lk)("div",{class:"add-to-favorite",onClick:s[0]||(s[0]=t=>N.toggleFavorite(K.product.id))},[(0,i.bF)(z,{icon:["fas","heart"],class:(0,a.C4)({like:K.favorites.includes(K.product.id)})},null,8,["class"])])]),(0,i.Lk)("div",w,[(0,i.Lk)("p",null,(0,a.v_)(K.product.content),1)]),(0,i.Lk)("div",y,[K.product.price?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",_,(0,a.v_)(K.product.origin_price)+"元",1)),K.product.price?((0,i.uX)(),(0,i.CE)("div",F,(0,a.v_)(K.product.origin_price)+"元",1)):(0,i.Q3)("",!0),K.product.price?((0,i.uX)(),(0,i.CE)("div",P,(0,a.v_)(K.product.price)+"元",1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",S,[s[7]||(s[7]=(0,i.Lk)("div",{class:"input-group"},[(0,i.Lk)("button",{class:"btn btn-outline-secondary",type:"button"},"-"),(0,i.Lk)("input",{type:"text",class:"form-control",value:"1"}),(0,i.Lk)("button",{class:"btn btn-outline-secondary",type:"button"},"+")],-1)),(0,i.Lk)("button",{type:"button",class:"add-to-cart",onClick:s[1]||(s[1]=t=>N.addCart(K.product.id)),disabled:this.status.loadingItem===K.product.id},[s[5]||(s[5]=(0,i.Lk)("i",{class:"fas fas-spinner fa-spin"},null,-1)),this.status.loadingItem===K.product.id?((0,i.uX)(),(0,i.CE)("div",E,s[4]||(s[4]=[(0,i.Lk)("span",{class:"visually-hidden"},"Loading...",-1)]))):(0,i.Q3)("",!0),s[6]||(s[6]=(0,i.eW)(" 加到購物車 "))],8,X)])])]),(0,i.Lk)("div",I,[(0,i.Lk)("div",x,[s[8]||(s[8]=(0,i.Lk)("h2",{class:"title"},"商品介紹",-1)),(0,i.Lk)("div",{class:"description",innerHTML:K.product.description},null,8,$)])]),(0,i.Lk)("div",V,[(0,i.Lk)("div",W,[s[10]||(s[10]=(0,i.Lk)("h2",{class:"title"},"其他相關商品",-1)),(0,i.bF)(J,{class:"mySwiper",modules:t.modules,slidesPerView:"auto",breakpoints:{320:{slidesPerView:1,spaceBetween:20},540:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:2,spaceBetween:40},1124:{slidesPerView:4,spaceBetween:30}},onSwiper:t.onSwiper,onSlideChange:t.onSlideChange},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(K.products,(t=>((0,i.uX)(),(0,i.Wv)(G,{key:t.id},{default:(0,i.k6)((()=>[(0,i.Lk)("div",B,[(0,i.Lk)("a",{onClick:s=>N.getProduct(t.id)},[(0,i.Lk)("h5",A,(0,a.v_)(t.title),1),(0,i.Lk)("div",H,[(0,i.Lk)("img",{src:t.imageUrl},null,8,T)])],8,Q),(0,i.Lk)("div",j,[(0,i.Lk)("div",q,"NT$"+(0,a.v_)(t.origin_price),1),(0,i.Lk)("div",{class:"add-to-cart",onClick:s=>N.addCart(t.id)},[(0,i.bF)(z,{class:"bars me-2",icon:"fas fa-bag-shopping"}),s[9]||(s[9]=(0,i.eW)("放入袋中 "))],8,D),(0,i.Lk)("div",{class:"add-to-favorite",onClick:s=>N.toggleFavorite(t)},[(0,i.bF)(z,{icon:["fas","heart"],class:(0,a.C4)({like:K.favorites.includes(t.id)})},null,8,["class"])],8,M)])])])),_:2},1024)))),128))])),_:1},8,["modules","onSwiper","onSlideChange"])])])])])])}var K=e(8421),N=e(4976),R={components:{Swiper:K.RC,SwiperSlide:K.qr},data(){return{product:{},products:[],favorites:[],isLoading:!1,cart:{},status:{loadingItem:""}}},inject:["emitter"],methods:{getProduct(t){const s=`https://vue3-course-api.hexschool.io/api/aida-api/product/${t}`;this.$http(s).then((t=>{this.product=t.data.product,this.product.description&&(this.product.description=this.formatDescription(this.product.description))}))},getProducts(){const t="https://vue3-course-api.hexschool.io/api/aida-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products)}))},formatDescription(t){return t.replace(/。/g,"。<br>").replace(/^內容物：/m,'<h2 class="subtitle">內容物</h2>').replace(/^保存期限：/m,'<h2 class="subtitle">保存期限</h2>').replace(/^保存方式：/m,'<h2 class="subtitle">保存方式</h2>').replace(/^食用方法：/m,'<h2 class="subtitle">食用方法</h2>').replace(/^營養成分：/m,'<h2 class="subtitle">營養成分</h2>')},addCart(t){const s="https://vue3-course-api.hexschool.io/api/aida-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(s,{data:e}).then((t=>{this.status.loadingItem="",console.log(t.data),console.log("發出事件",t.data),this.emitter.emit("addCart",t.data)}))},toggleFavorite(t){this.product&&this.product.id&&(this.favorites=N.A.toggleFavorite(this.favorites,this.product.id),this.emitter.emit("push-message",{style:"success",title:this.isFavorite?"已從最愛移除！":"已加入最愛！"}))}},created(){this.favorites=N.A.loadFavorites();const t=this.$route.params.productId;this.getProduct(t),this.getProducts()}},z=e(1241);const G=(0,z.A)(R,[["render",U]]);var J=G}}]);
//# sourceMappingURL=377.da5e82a6.js.map