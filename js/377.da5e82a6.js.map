{"version":3,"file":"js/377.da5e82a6.js","mappings":"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","sources":["webpack://oh/./src/views/ProductInfo.vue","webpack://oh/./src/views/ProductInfo.vue?b46e"],"sourcesContent":["<!-- eslint-disable no-undef -->\n<template>\n    <div class=\"product-info mt-5\">\n        <div class=\"container\">\n            <div aria-label=\"breadcrumb\">\n                <ol class=\"breadcrumb\">\n                  <li class=\"breadcrumb-item\">\n                    <router-link to=\"/\">Home</router-link>\n                  </li>\n                  <li class=\"breadcrumb-item\">\n                    <router-link to=\"/items\">Collections</router-link>\n                  </li>\n                  <li v-if=\"product\" class=\"breadcrumb-item active\" aria-current=\"page\">\n                    {{ product.title }}\n                  </li>\n                  <li v-else class=\"breadcrumb-item active\" aria-current=\"page\">\n                    Loading...\n                  </li>\n                </ol>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <div class=\"img-wrap\">\n                    <img :src=\"product.imageUrl\" alt=\"\" class=\"img-fluid rounded border-0 mb-3\">\n                  </div>\n                </div>\n                <div class=\"col-md-6\">\n                  <div class=\"information\">\n                      <div class=\"category\">{{ product.category }}</div>\n                      <div class=\"title-wrap\">\n                        <div class=\"title\">{{ product.title }}</div>\n                        <div class=\"add-to-favorite\"  @click=\"toggleFavorite(product.id)\">\n                          <font-awesome-icon :icon=\"['fas', 'heart']\"  :class=\"{ 'like': favorites.includes(product.id) }\"/>\n                        </div>\n                      </div>\n                      <div class=\"content\">\n                        <p>{{ product.content }}</p>\n                      </div>\n                      <div class=\"d-flex align-items-center justify-content-between mt-3\">\n                        <div class=\"h5\" v-if=\"!product.price\">{{ product.origin_price }}元</div>\n                        <div class=\"origin-price\" v-if=\"product.price\">{{ product.origin_price }}元</div>\n                        <div class=\"price\" v-if=\"product.price\">{{ product.price }}元</div>\n                      </div>\n                      <div class=\"add-content\">\n                        <div class=\"input-group\">\n                          <button class=\"btn btn-outline-secondary\" type=\"button\">-</button>\n                          <input type=\"text\" class=\"form-control\" value=\"1\">\n                          <button class=\"btn btn-outline-secondary\" type=\"button\">+</button>\n                        </div>\n                        <button type=\"button\" class=\"add-to-cart\" @click=\"addCart(product.id)\" :disabled=\"this.status.loadingItem === product.id\">\n                          <i class=\"fas fas-spinner fa-spin\"></i>\n                          <div v-if=\"this.status.loadingItem === product.id\" class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\n                              <span class=\"visually-hidden\">Loading...</span>\n                          </div>\n                          加到購物車\n                        </button>\n                      </div>\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"content\">\n                    <h2 class=\"title\">商品介紹</h2>\n                    <div class=\"description\" v-html=\"product.description\"></div>\n                  </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"related-product\">\n                    <h2 class=\"title\">其他相關商品</h2>\n                      <swiper class=\"mySwiper\" :modules=\"modules\"\n                        :slidesPerView=\"'auto'\"\n                        :breakpoints=\"{\n                          '320': {\n                            slidesPerView: 1,\n                            spaceBetween: 20,\n                          },\n                          '540': {\n                            slidesPerView: 2,\n                            spaceBetween: 20,\n                          },\n                          '768': {\n                            slidesPerView: 2,\n                            spaceBetween: 40,\n                          },\n                          '1124': {\n                            slidesPerView: 4,\n                            spaceBetween: 30,\n                          },\n                        }\"\n                        @swiper=\"onSwiper\"\n                        @slideChange=\"onSlideChange\">\n                        <swiper-slide v-for=\"item in products\" :key=\"item.id\">\n                          <div class=\"card\">\n                            <a @click=\"getProduct(item.id)\">\n                              <h5 class=\"card-title\">{{ item.title }}</h5>\n                              <div class=\"card-img-top rounded border-0\">\n                                <img :src=\"item.imageUrl\">\n                              </div>\n                            </a>\n                            <div class=\"card-body\">\n                              <div class=\"price\">NT${{ item.origin_price }}</div>\n                              <div class=\"add-to-cart\" @click=\"addCart(item.id)\">\n                                <font-awesome-icon class=\"bars me-2\" icon=\"fas fa-bag-shopping\"/>放入袋中\n                              </div>\n                              <div class=\"add-to-favorite\"  @click=\"toggleFavorite(item)\">\n                                <font-awesome-icon :icon=\"['fas', 'heart']\"  :class=\"{ 'like': favorites.includes(item.id) }\"/>\n                              </div>\n                            </div>\n                          </div>\n                        </swiper-slide>\n                    </swiper>\n                  </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { Swiper, SwiperSlide } from 'swiper/vue'\nimport favorites from '@/methods/favorite'\nimport 'swiper/css'\nimport 'swiper/css/pagination'\n\nexport default ({\n  components: {\n    Swiper,\n    SwiperSlide\n  },\n  data () {\n    return {\n      product: {},\n      products: [],\n      favorites: [],\n      isLoading: false,\n      cart: {},\n      status: {\n        loadingItem: '' // 對應品項id\n      }\n    }\n  },\n  inject: ['emitter'],\n  methods: {\n    getProduct (productId) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${productId}`\n      this.$http(api).then((res) => {\n        // console.log(res.data)\n        this.product = res.data.product\n        if (this.product.description) {\n          this.product.description = this.formatDescription(this.product.description)\n        }\n      })\n    },\n    getProducts () {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n      this.isLoading = true\n      this.$http.get(api).then((res) => {\n        this.isLoading = false\n        if (res.data.success) {\n          this.products = res.data.products\n        }\n      })\n    },\n    formatDescription (description) {\n      return description\n        .replace(/。/g, '。<br>') // 在句號後換行\n        .replace(/^內容物：/m, '<h2 class=\"subtitle\">內容物</h2>')\n        .replace(/^保存期限：/m, '<h2 class=\"subtitle\">保存期限</h2>')\n        .replace(/^保存方式：/m, '<h2 class=\"subtitle\">保存方式</h2>')\n        .replace(/^食用方法：/m, '<h2 class=\"subtitle\">食用方法</h2>')\n        .replace(/^營養成分：/m, '<h2 class=\"subtitle\">營養成分</h2>')\n    },\n    addCart (productId) {\n      // console.log(productId)\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.status.loadingItem = productId\n      const cart = {\n        product_id: productId,\n        qty: 1\n      }\n      this.$http.post(api, { data: cart }).then((res) => {\n        this.status.loadingItem = ''\n        console.log(res.data)\n        console.log('發出事件', res.data)\n        this.emitter.emit('addCart', res.data)\n      })\n    },\n    toggleFavorite (item) {\n      // console.log(item)\n      if (this.product && this.product.id) {\n        this.favorites = favorites.toggleFavorite(this.favorites, this.product.id)\n        this.emitter.emit('push-message', {\n          style: 'success',\n          title: this.isFavorite ? '已從最愛移除！' : '已加入最愛！'\n        })\n      }\n    }\n  },\n  created () {\n    this.favorites = favorites.loadFavorites()\n    const productId = this.$route.params.productId\n    this.getProduct(productId)\n    this.getProducts()\n  }\n})\n</script>\n","import { render } from \"./ProductInfo.vue?vue&type=template&id=38044a8c\"\nimport script from \"./ProductInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ProductInfo.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","role","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_6","$data","product","_hoisted_7","_toDisplayString","title","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","src","imageUrl","alt","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","category","_hoisted_16","_hoisted_17","onClick","$event","$options","toggleFavorite","id","_component_font_awesome_icon","icon","_normalizeClass","favorites","includes","_hoisted_18","content","_hoisted_19","price","_createCommentVNode","_hoisted_20","origin_price","_hoisted_21","_hoisted_22","_hoisted_23","type","value","addCart","disabled","status","loadingItem","_hoisted_25","_hoisted_24","_hoisted_26","_hoisted_27","innerHTML","description","_hoisted_28","_hoisted_29","_hoisted_30","_component_swiper","modules","_ctx","slidesPerView","breakpoints","onSwiper","onSlideChange","_Fragment","_renderList","products","item","_createBlock","_component_swiper_slide","_hoisted_31","getProduct","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_32","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","components","Swiper","SwiperSlide","data","isLoading","cart","inject","methods","productId","api","this","$http","then","res","formatDescription","getProducts","get","success","replace","product_id","qty","post","console","log","emitter","emit","style","isFavorite","created","loadFavorites","$route","params","__exports__","render"],"sourceRoot":""}